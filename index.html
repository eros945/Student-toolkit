<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Toolkit</title>
    </style>
</head>
<body>
    <div class="container">
        <h1> Student Toolkit</h1>
        <div class="modules-grid">
            <div class="module">
                <h2> –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –æ—Ü–µ–Ω–æ–∫</h2>
                <div class="input-group">
                    <label for="grades-input">–í–≤–µ–¥–∏—Ç–µ –æ—Ü–µ–Ω–∫–∏ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é):</label>
                    <input type="text" id="grades-input" placeholder="–ü—Ä–∏–º–µ—Ä: 5,4,3,5,4">
                </div>
                <button onclick="calculateGrades()">–ü–æ—Å—á–∏—Ç–∞—Ç—å</button>
                <div id="grades-error" class="error"></div>
                <div id="grades-result" class="result" style="display: none;">
                    <div class="result-item">
                        <span class="result-label">–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª:</span>
                        <span class="result-value" id="avg-grade">-</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è:</span>
                        <span class="result-value" id="max-grade">-</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è:</span>
                        <span class="result-value" id="min-grade">-</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ü–µ–Ω–æ–∫:</span>
                        <span class="result-value" id="count-grade">-</span>
                    </div>
                </div>
            </div>
            <div class="module">
                <h2>–ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã</h2>
                <div class="input-group">
                    <label for="temp-input">–í–≤–µ–¥–∏—Ç–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É:</label>
                    <input type="number" id="temp-input" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 25" step="0.1">
                </div>
                <div class="input-group"
                    <label for="temp-mode">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º:</label>
                    <select id="temp-mode">
                        <option value="c-to-f">¬∞C ‚Üí ¬∞F (–¶–µ–ª—å—Å–∏–π ‚Üí –§–∞—Ä–µ–Ω–≥–µ–π—Ç)</option>
                        <option value="f-to-c">¬∞F ‚Üí ¬∞C (–§–∞—Ä–µ–Ω–≥–µ–π—Ç ‚Üí –¶–µ–ª—å—Å–∏–π)</option>
                    </select>
                </div>
                <button onclick="convertTemperature()">–ü–µ—Ä–µ–≤–µ—Å—Ç–∏</button>
                <div id="temp-error" class="error"></div>
                <div id="temp-result" class="result" style="display: none;">
                    <div class="result-item">
                        <span class="result-label">–†–µ–∑—É–ª—å—Ç–∞—Ç:</span>
                        <span class="result-value" id="temp-value">-</span>
                    </div>
                </div>
            </div>
            <div class="module">
                <h2>ToDo-—Å–ø–∏—Å–æ–∫</h2>
                <div class="todo-input-group">
                    <input type="text" id="todo-input" placeholder="–î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤–æ–µ –¥–µ–ª–æ...">
                    <button class="btn-add" onclick="addTodo()">–î–æ–±–∞–≤–∏—Ç—å</button>
                </div>
                <ul class="todo-list" id="todo-list"></ul>
                <div class="empty-message" id="empty-message">–ù–µ—Ç –∑–∞–¥–∞—á. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—É—é!</div>
            </div>
        </div>
    </div>
    <script>
        function calculateGrades() {
            const input = document.getElementById('grades-input').value.trim();
            const errorDiv = document.getElementById('grades-error');
            const resultDiv = document.getElementById('grades-result');
            errorDiv.classList.remove('show');
            errorDiv.textContent = '';
            resultDiv.style.display = 'none';
            if (!input) {
                showError(errorDiv, '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –æ—Ü–µ–Ω–∫–∏!');
                return;
            }
            try {
                const gradesStr = input.split(',').map(g => g.trim());
                const grades = gradesStr.map(g => {
                    const num = parseFloat(g);
                    if (isNaN(num) || num < 0 || num > 5) {
                        throw new Error('–û—Ü–µ–Ω–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —á–∏—Å–ª–∞–º–∏ –æ—Ç 0 –¥–æ 5');
                    }
                    return num;
                });

                if (grades.length === 0) {
                    throw new Error('–í–≤–µ–¥–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É –æ—Ü–µ–Ω–∫—É');
                }
                const average = (grades.reduce((a, b) => a + b, 0) / grades.length).toFixed(2);
                const max = Math.max(...grades);
                const min = Math.min(...grades);
                const count = grades.length;

                document.getElementById('avg-grade').textContent = average;
                document.getElementById('max-grade').textContent = max;
                document.getElementById('min-grade').textContent = min;
                document.getElementById('count-grade').textContent = count;

                resultDiv.style.display = 'block';
            } catch (error) {
                showError(errorDiv, error.message);
            }
        }
        function convertTemperature() {
            const input = document.getElementById('temp-input').value.trim();
            const mode = document.getElementById('temp-mode').value;
            const errorDiv = document.getElementById('temp-error');
            const resultDiv = document.getElementById('temp-result');
            errorDiv.classList.remove('show');
            errorDiv.textContent = '';
            resultDiv.style.display = 'none';
            if (!input) {
                showError(errorDiv, '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É!');
                return;
            }
            try {
                const temp = parseFloat(input);
                if (isNaN(temp)) {
                    throw new Error('–í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ!');
                }
                let result;
                let unit;
                if (mode === 'c-to-f') {
                    result = (temp * 9/5 + 32).toFixed(2);
                    unit = '¬∞F';
                } else {
                    result = ((temp - 32) * 5/9).toFixed(2);
                    unit = '¬∞C';
                }
                document.getElementById('temp-value').textContent = result + ' ' + unit;
                resultDiv.style.display = 'block';
            } catch (error) {
                showError(errorDiv, error.message);
            }
        }
        class TodoList {
            constructor() {
                this.todos = this.loadFromStorage();
                this.render();
            }
            loadFromStorage() {
                const saved = localStorage.getItem('todos');
                return saved ? JSON.parse(saved) : [];
            }
            saveToStorage() {
                localStorage.setItem('todos', JSON.stringify(this.todos));
            }
            addTodo(text) {
                if (!text.trim()) return;
                
                const todo = {
                    id: Date.now(),
                    text: text.trim(),
                    completed: false
                };
                this.todos.push(todo);
                this.saveToStorage();
                this.render();
            }
            toggleTodo(id) {
                const todo = this.todos.find(t => t.id === id);
                if (todo) {
                    todo.completed = !todo.completed;
                    this.saveToStorage();
                    this.render();
                }
            }
            deleteTodo(id) {
                this.todos = this.todos.filter(t => t.id !== id);
                this.saveToStorage();
                this.render();
            }
            render() {
                const list = document.getElementById('todo-list');
                const emptyMsg = document.getElementById('empty-message');
                list.innerHTML = '';
                
                if (this.todos.length === 0) {
                    emptyMsg.style.display = 'block';
                    return;
                }
                emptyMsg.style.display = 'none';
                this.todos.forEach(todo => {
                    const li = document.createElement('li');
                    li.className = 'todo-item' + (todo.completed ? ' completed' : '');                    
                    li.innerHTML = `
                        <span class="todo-text">${escapeHtml(todo.text)}</span>
                        <div class="todo-actions">
                            <button class="btn-small btn-done ${todo.completed ? 'completed' : ''}" 
                                    onclick="todoList.toggleTodo(${todo.id})">
                                ${todo.completed ? '‚úì –ì–æ—Ç–æ–≤–æ' : '‚óã –ì–æ—Ç–æ–≤–æ'}
                            </button>
                            <button class="btn-small btn-delete" onclick="todoList.deleteTodo(${todo.id})">
                                üóë –£–¥–∞–ª–∏—Ç—å    
                    `;                    
                    list.appendChild(li);
                });
            }
        }
        let todoList = new TodoList();
        function addTodo() {
            const input = document.getElementById('todo-input');
            todoList.addTodo(input.value);
            input.value = '';
            input.focus();
        }
        document.addEventListener('DOMContentLoaded', function() {
            const todoInput = document.getElementById('todo-input');
            todoInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    addTodo();
                }
            }); 
            const gradesInput = document.getElementById('grades-input');
            gradesInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    calculateGrades();
                }
            });
            const tempInput = document.getElementById('temp-input');
            tempInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    convertTemperature();
                }
            });
        });
        function showError(element, message) {
            element.textContent = message;
            element.classList.add('show');
        }
        function escapeHtml(text) {
            const map = {
                '&': '&amp;',
                '<': '&lt;',
                '>': '&gt;',
                '"': '&quot;',
                "'": '&#039;'
            };
            return text.replace(/[&<>"']/g, m => map[m]);
        }
    </script>
</body>
</html>
